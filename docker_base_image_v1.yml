---
- name: Base image creation for docker container
  hosts: slave
  gather_facts: true
  remote_user: root
  tasks:
       - name: Pull CentOS-7 base image for container
         docker_container:
           name: bhge-centos-7
           image: "centos:7"
           detach: yes
           tty: yes
           state: started

       - name: Copy files from host to container
         command: docker cp /home/perfbhi/Docker_Baseimage/Source bhge-centos-7:/Source
         become: yes

       - name: Install packages inside container
         command: docker exec bhge-centos-7 sh -c /Source/yum_install.sh
         become: yes
